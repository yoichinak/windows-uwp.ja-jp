---
description: Microsoft Store ではバージョン番号に関する特定の規則が適用され、別の OS バージョンでは機能が多少異なります。
title: パッケージ バージョンの番号付け
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.date: 09/24/2020
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 18b4d6b8a901e68ea1e8513b7076a951e939f028
ms.sourcegitcommit: a3bbd3dd13be5d2f8a2793717adf4276840ee17d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/30/2020
ms.locfileid: "93035035"
---
# <a name="package-version-numbering"></a>パッケージ バージョンの番号付け

提供する各パッケージには、バージョン番号がある必要があります (アプリ マニフェストの [Package/Identity](/uwp/schemas/appxpackage/uapmanifestschema/element-identity) 要素の **Version** 属性の値として提供されます)。 Microsoft Store ではバージョン番号に関する特定の規則が適用され、別の OS バージョンでは機能が多少異なります。

> [!NOTE]
> このトピックでは、"パッケージ" について説明しますが、特に明記されていない限り、msix/.appx と .msixbundle/.appxbundle ファイルの両方のバージョン番号に同じ規則が適用されます。


## <a name="version-numbering-for-windows-10-packages"></a>Windows 10 パッケージのバージョン番号付け

> [!IMPORTANT]
> Windows 10 (UWP) パッケージの場合、バージョン番号の最後 (4 番目) のセクションはストア用に予約されており、パッケージをビルドするときは0のままにしておく必要があります (ただし、ストアではこのセクションの値が変更される可能性があります)。 その他のセクションは 0 ~ 65535 の整数に設定する必要があります (最初のセクションは0にできません)。

発行された送信から UWP パッケージを選択すると、Microsoft Store は常に、お客様の Windows 10 デバイスに適用可能な最新バージョンのパッケージを使用します。 これにより高い柔軟性が与えられ、特定のデバイスの種類のユーザーにどのパッケージを提供するかを管理することができます。 重要なことに、これらのパッケージは任意の順序で申請することができます。後続の各申請でより高いバージョンのパッケージを提供する必要はありません。

同じバージョン番号を持つ複数の UWP パッケージを指定できます。 ただし、バージョン番号を共有するパッケージが同じアーキテクチャを持つことはできません。ストアで各パッケージに使用する完全な ID は一意である必要があるためです。 詳しくは、「 [**Identity**](/uwp/schemas/appxpackage/uapmanifestschema/element-identity)」をご覧ください。

同じバージョン番号を使用する複数の UWP パッケージを指定すると、(注文 x64、x86、ARM、ニュートラル) アーキテクチャが使用され、どちらがより高いランクになるかが決定されます (ストアが顧客のデバイスに提供するパッケージを決定する場合)。 バージョン番号が同じアプリ バンドルにランクを付けるときは、x64 パッケージが含まれているアプリ バンドルが x86 パッケージしか含まれていないアプリ バンドルより高いランクとなるようにバンドル内で最高のアーキテクチャのランクを考慮します。

これにより、アプリを時間をかけて進化させる大きな柔軟性が与えられます。 以前にサポートされていなかった Windows 10 デバイスのサポートを追加するために、より古いバージョン番号を使用する新しいパッケージをアップロードして送信することができます。また、ハードウェアや OS の機能を活用するために、依存関係がより高いバージョンのパッケージを追加したり、既存の顧客ベースの一部またはすべての更新プログラムとし

次の例は、バージョン番号を管理して複数の申請でユーザーに目的のパッケージを提供する方法について説明します。

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>例: 複数の申請で 1 つのパッケージに移行する

Windows 10 では、すべての場所で実行される単一のコードベースを記述することができます。 これにより、新しいクロスプラットフォーム プロジェクトの開始がはるかに簡単になります。 ただし、さまざまな理由から、既存のコードベースを結合してすぐに 1 つのプロジェクトを作成したくない場合があります。

パッケージのバージョンの規則を使用すると、ユニバーサル デバイス ファミリではユーザーを 1 つのパッケージに徐々に移行させ、一方で (Windows 10 API を利用するものを含む) 特定のデバイス ファミリでは暫定的な多数の更新を配布することができます。 次の例では、同じアプリの一連の送信に対して、同じ規則が一貫して適用される方法を示しています。

| 申請 | 内容                                                  | カスタマー エクスペリエンス                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.0.0 <br> -   デバイス ファミリ: Windows.Mobile、minVersion 10.0.10240.0     | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   その他のデバイス ファミリでアプリの購入とインストールを行うことはできない。 |
| 2          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.0.0 <br> -   デバイス ファミリ: Windows.Mobile、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   導入されているその他の (非デスクトップ、非モバイル) デバイス ファミリでは 1.0.0.0 を取得。 <br> -   アプリが既にインストールされているデスクトップ デバイスとモバイル デバイスでは更新が表示されない (利用可能な最高のバージョンが既にあり、1.1.10.0 と 1.1.0.0 は共に 1.0.0.0 より上位であるため)。 |
| 3          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.5.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10250.0 <br> <br> -   パッケージ バージョン: 1.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10250.0 以上のデバイスでは 1.1.5.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上 10.010250.0 未満のデバイスでは 1.1.0.0 を取得。 
| 4          | -   パッケージ バージョン: 2.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0   | -   Windows 10 ビルド v10.0.10240.0 以上のすべてのデバイス ファミリのすべてのユーザーはパッケージ 2.0.0.0 を取得。 | 

> [!NOTE]
>  どの場合でも、ユーザーのデバイスでは条件を満たす最も大きいバージョン番号のパッケージを受け取ります。 たとえば、上記の 3 番目の申請では、OS バージョン 10.0.10250.0 以上で v1.1.5.0 を取得できる場合でも、すべてのデスクトップ デバイスが v1.1.10.0 を取得します。 1.1.10.0 は利用可能な最も大きいバージョン番号であるため、これが取得するパッケージになります。

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>新規の取得のためにバージョン番号を使用して以前配布したパッケージにロールバックする

パッケージのコピーを保持する場合は、リリースに関する問題を検出する必要がある場合は、ストア内のアプリのパッケージを以前の Windows 10 パッケージにロールバックするオプションがあります。 これは、問題の解決に時間がかかっている間に、中断を顧客に限定する一時的な方法です。

これを行うには、新しい [送信](app-submissions.md)を作成します。 問題があるパッケージを削除して、ストアで提供する以前のパッケージをアップロードします。 ロールバックするパッケージを既に受け取っているユーザーは問題のあるパッケージを持ったままになります (以前のパッケージのバージョン番号がより小さいため)。 しかし、これにより、ストアでアプリを利用できるようにした間にその他のユーザーが問題のあるパッケージを取得することができなくなります。

問題のあるパッケージを既に受け取っているお客様の問題を解決するには、可能な限り早く、正しくないパッケージよりも新しいバージョン番号を持つ新しい Windows 10 パッケージを送信できます。 その申請の認定プロセスが完了すると、それがより大きいバージョン番号になるため、すべてのユーザーが新しいパッケージに更新されます。


## <a name="version-numbering-for-windows-81-and-earlier-and-windows-phone-81-packages"></a>Windows 8.1 (以前) と Windows Phone 8.1 パッケージのバージョン番号付け

> [!IMPORTANT]
> Windows Phone 8. x SDK を使用してビルドされた新しい XAP パッケージをアップロードすることはできなくなりました。 既に XAP パッケージと共にストアに格納されているアプリは、引き続き Windows 10 Mobile デバイスで動作します。 詳細については、こちらの [ブログ投稿](https://blogs.windows.com/windowsdeveloper/2018/08/20/important-dates-regarding-apps-with-windows-phone-8-x-and-earlier-and-windows-8-8-1-packages-submitted-to-microsoft-store)を参照してください。

Windows Phone 8.1 を対象とする .appx パッケージでは、新しい申請のパッケージのバージョン番号は最後の申請 (または、以前の申請) に含まれるパッケージの番号より常に大きい必要があります。

Windows 8 と Windows 8.1 を対象とする .appx パッケージでは、アーキテクチャごとに同じ規則が適用されます。新しい申請のパッケージのバージョン番号は、同じアーキテクチャで最後に Microsoft Store に公開されたパッケージの番号より常に大きい必要があります。

さらに、Windows 8.1 用パッケージのバージョン番号は、同じアプリのどの Windows 8 用パッケージのバージョン番号よりも常に大きい必要があります。 言い換えれば、申請する Windows 8 用パッケージのバージョン番号は、同じアプリについて申請したすべての Windows 8.1 用パッケージのバージョン番号よりも小さい必要があります。

> [!NOTE]
> アプリに Windows 10 パッケージが含まれている場合は、windows 10 パッケージのバージョン番号が、Windows 8、Windows 8.1、または Windows Phone 8.1 パッケージのバージョン番号よりも大きい必要があります。 詳細については、「 [Windows 10 用のパッケージを以前に発行されたアプリに追加する](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app)」を参照してください。

ここでは、Windows 8 と Windows 8.1 を対象とするパッケージについて、さまざまなバージョン番号の更新シナリオで発生する処理の例をいくつか示します。

| ストア内のアプリのバージョン  | アップロードするバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、新規インストールのバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、既存のバージョンの更新 |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| なし                                     | x86, v1.0.0.0               | x86, v1.0.0.0 (x86 と x64 の両方のコンピューター)                                                | Nothing。 |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | 対応するアーキテクチャ用の v1.0.0.0                                                   | Nothing。 バージョン番号は同じであるため。 |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | x86 の場合は v1.0.0.0 <br> x64 の場合は v1.0.0.1                 | アプリを x86 コンピューターで実行している場合はなし。 <br> アプリを x64 コンピューターで実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 <br> **注:** x86 バージョンのアプリを x64 コンピューターで実行している場合、アンインストールして再インストールしない限り、アプリは x64 バージョンに更新されません。 |
| なし                                     | neutral, v1.0.0.1           | neutral, v1.0.0.1 (すべてのコンピューター)                                                         | Nothing。 |
| neutral, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | 対応するアーキテクチャ用の v1.0.0.0          | Nothing。 neutral, v1.0.0.1 のアプリは引き続き使用される。 |
| neutral, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | 対応するアーキテクチャ用の v1.0.0.1 | neutral, v1.0.0.1 のアプリを実行している場合はなし。 <br> 特定のアーキテクチャ用の v1.0.0.0 のアプリを実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | 対応するアーキテクチャ用の v1.0.0.2  | 特定のアーキテクチャ用の v1.0.0.1 のアプリを実行している場合は v1.0.0.1 から v1.0.0.2 に更新。 |

> [!NOTE]
> .appx パッケージとは異なり、.xap パッケージのバージョン番号は、特定の顧客にどのパッケージを提供するかを決める場合に考慮されません。 特定の .xap パッケージから新しいパッケージへと顧客を更新するには、新しい提出で以前の .xap を削除してください。
